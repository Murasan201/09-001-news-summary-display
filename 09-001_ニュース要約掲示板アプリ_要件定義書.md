### 文書番号: 09-001

## 1. アプリ名
- アプリ名: ニュース要約掲示板アプリ

## 2. 概要
Raspberry Piから取得した最新ニュースをOpenAI APIで要約し、LCD1602モジュールにて見出しと要約を横スクロール表示するPythonアプリケーションです。Web表示は行わず、ハードウェア上の小型ディスプレイのみで情報を確認します。

## 3. 目的
- OpenAI APIを用いたテキスト要約技術の習得
- ニュースAPIからのデータ取得方法を学ぶ
- LCD1602へのテキストスクロール表示手法を理解する

## 4. 対象利用者
- プログラミング初心者（機器制御とAPI利用の入門）
- Raspberry Pi入門者
- AI要約機能を学びたい学生・教育者

## 5. システム構成
| コンポーネント            | 役割                                    |
|---------------------------|-----------------------------------------|
| Raspberry Pi 5            | スクリプト実行、API呼び出し             |
| LCD1602ディスプレイ       | 要約本文のスクロール表示                |
| ネットワーク              | ニュースAPI・OpenAI API通信             |
| ニュースAPI（NewsAPI等）  | 最新ニュース見出し取得                  |
| OpenAI API                | 取得したニュースを要約                  |

## 6. ハードウェア要件
- Raspberry Pi 5本体
- microSDカード（Raspberry Pi OSインストール済み）
- LCD1602ディスプレイモジュール（I²C接続）
- ジャンパーワイヤ
- ブレッドボードまたはLCD用固定具
- 電源（公式5V電源アダプタ）

## 7. ソフトウェア要件
- OS：Raspberry Pi OS（最新推奨）
- 言語：Python 3.9以上
- ライブラリ：
  - openai（OpenAI APIクライアント）
  - newsapi-pythonまたはrequests（ニュース取得）
  - RPLCDまたはluma.lcd（LCD制御）
  - smbus2（I²C通信）
  - python-dotenv（環境変数管理）
- 参考実装: [OpenAI API サンプル](https://murasan-net.com/2025/03/20/openai-api-sample-2025/)

## 8. 機能要件
1. **APIキー読み込み**
   - `.env` または環境変数から `NEWS_API_KEY` と `OPENAI_API_KEY` を取得
2. **ニュース取得**
   - ニュースAPIでトップヘッドラインを取得（例：上位5件）
3. **要約生成**
   - 取得した各見出しをOpenAI APIに投げ、100文字程度の要約を生成
4. **テキスト結合**
   - 見出し＋要約を一連の文字列として結合（例："Headline: ... Summary: ..."）
5. **LCD表示**
   - LCD1602に表示可能な幅ずつテキストを切り出し、横スクロールして表示
   - 各ニュース要約が数秒ごとに切り替わる
6. **定期更新**
   - 指定間隔（分）でニュース取得と要約生成を再実行

## 9. 非機能要件
- **可読性**: PEP8準拠、十分なコメント記載
- **保守性**: 関数分割とモジュール化により拡張しやすい設計
- **単一ファイル完結**: 可能な限り一つのPythonファイルで実装
- **信頼性**: ネットワーク障害やAPIエラー時にリトライとエラーログを実装

## 10. テスト要件
- **API取得テスト**: 無効APIキー時のエラーハンドリング検証
- **要約生成テスト**: ダミーテキストで要約処理の整合性確認
- **LCD表示テスト**: 異なる長さのテキストで横スクロール動作を確認
- **定期更新テスト**: 指定インターバルで再取得・再表示が行われること

## 11. 受け入れ基準
1. 最新ニュースの見出しと要約がLCD1602で正しくスクロール表示される
2. リンクエラーやタイムアウト時にログが出力され、次サイクルで回復動作する
3. インターバル設定変更が即時反映される

---
以上の要件をもとに、ニュース要約掲示板アプリのプロトタイプを開発してください。
